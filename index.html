<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edia Learning ‚Äî Territory Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="sidebar-header">
    <div class="brand">
      <img src="data:image/png;base64,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" class="brand-icon" alt="Edia">
      <h1>Territory Map<span>Edia Learning ¬∑ Strategic Intelligence</span></h1>
      <button class="theme-toggle-btn" onclick="toggleTheme()" title="Toggle light/dark mode">
        <svg class="theme-icon-sun" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg class="theme-icon-moon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
      <button class="reset-view-btn" onclick="resetMapView()" title="Reset view">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      </button>
    </div>
    <div class="view-toggle">
      <button class="view-btn active-strat" data-view="accounts" onclick="setView('accounts')">Accounts</button>
      <button class="view-btn" data-view="customers" onclick="setView('customers')">Active Customers</button>
      <button class="view-btn" data-view="all" onclick="setView('all')">All</button>
    </div>
    <div class="team-rep-selectors" id="teamRepSelectors">
      <div class="team-rep-row">
        <label class="team-rep-label">Team</label>
        <select class="team-rep-select" id="teamSelect" onchange="onTeamChange(this.value)">
          <option value="">All Teams</option>
        </select>
      </div>
      <div class="team-rep-row" id="repRow" style="display:none;">
        <label class="team-rep-label">Rep</label>
        <select class="team-rep-select" id="repSelect" onchange="onRepChange(this.value)">
          <option value="">All Reps</option>
        </select>
      </div>
    </div>
  </div>

  <div class="sidebar-scroll">
  <div class="stats-bar">
    <div class="stat-card stat-strat">
      <div class="num" id="stat-strat-count">0</div>
      <div class="label">Accounts</div>
    </div>
    <div class="stat-card stat-cust">
      <div class="num" id="stat-cust-count">0</div>
      <div class="label">Customers</div>
    </div>
    <div class="stat-card" id="stat-card-overlap">
      <div class="num" id="stat-overlap-count" style="color:#fdcb6e">0</div>
      <div class="label" id="stat-overlap-label">Overlap</div>
    </div>
    <div class="stat-card">
      <div class="num" id="stat-states" style="color: var(--accent-both);">0</div>
      <div class="label">States</div>
    </div>
  </div>

  <div class="search-box">
    <div class="search-wrap">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
      <input type="text" class="search-input" id="searchInput" placeholder="Search districts, regions, states..." autocomplete="off"
        oninput="onSearchInput()" onkeydown="onSearchKeydown(event)" onfocus="onSearchInput()" onblur="setTimeout(()=>closeAutocomplete(),150)">
      <div class="search-autocomplete" id="searchAutocomplete"></div>
    </div>
  </div>

  <div class="prox-control" id="proxControl">
    <label class="prox-toggle">
      <input type="checkbox" id="proxCheck" onchange="toggleProximity(this.checked)">
      <span class="prox-slider"></span>
      <span class="prox-label">Customer Proximity</span>
    </label>
    <div class="prox-radius-wrap" id="proxRadiusWrap" style="display:none;">
      <input type="range" id="proxRadius" min="10" max="150" value="50" step="1" class="prox-range" oninput="updateProxRadius(this.value)">
      <input type="number" id="proxMilesInput" class="prox-miles-input" value="50" min="10" max="150" onchange="setProxRadiusFromInput(this.value)">
      <span class="prox-miles-unit">mi</span>
      <span class="prox-nearby-count" id="proxNearbyCount"></span>
    </div>
  </div>

  <div class="prox-control" id="adaControl">
    <label class="prox-toggle">
      <input type="checkbox" id="adaCheck" onchange="toggleAdaFilter(this.checked)">
      <span class="prox-slider ada-slider"></span>
      <span class="prox-label">ADA Accounts</span>
    </label>
  </div>

  <div class="filters-wrap collapsed" id="filtersWrap">
    <div class="filters-toggle" onclick="toggleFiltersPanel()">
      <span class="filters-toggle-label">Filters</span>
      <span class="filters-toggle-active" id="filtersActiveCount"></span>
      <span class="filters-toggle-chevron" id="filtersChevron">&#9660;</span>
    </div>
    <div class="filters-area" id="filtersArea">
      <!-- Filters injected by JS based on view -->
    </div>
  </div>

  <div class="pipeline-panel pl-collapsed" id="pipelinePanel" style="display:none;">
    <div class="pipeline-toggle" onclick="togglePipelinePanel()">
      <span class="filters-toggle-label">Pipeline Summary</span>
      <span class="pipeline-chevron" id="pipelineChevron">&#9660;</span>
    </div>
    <div id="pipelineDetail" class="collapsed">
      <div id="pipelineStats"></div>
    </div>
  </div>


  <div class="notes-mgmt">
    <span class="notes-count" id="notesCount"></span>
    <div class="notes-btns">
      <button class="notes-btn" onclick="copyAllNotes()" title="Copy all notes to clipboard">üìã Copy All</button>
      <button class="notes-btn" onclick="exportNotes()" title="Export notes as JSON">‚Üì Export</button>
      <label class="notes-btn" title="Import notes from JSON">‚Üë Import<input type="file" accept=".json" style="display:none" onchange="importNotes(event)"></label>
    </div>
  </div>
  </div><!-- end sidebar-scroll -->
</div>

<!-- Data Refresh FAB + Panel -->
<button class="data-refresh-fab" onclick="toggleDataRefreshPanel()" title="Upload data">
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
  Data Refresh
</button>
<div class="data-refresh-panel" id="dataRefreshPanel">
  <div class="data-refresh-header">
    <h4>Data Refresh</h4>
    <button class="data-refresh-close" onclick="toggleDataRefreshPanel()">&times;</button>
  </div>
  <div class="data-refresh-body">
    <div class="data-refresh-dropzone" id="dataRefreshDropzone"
      onclick="document.getElementById('dataRefreshFileInput').click()"
      ondragover="event.preventDefault();this.classList.add('drag-over')"
      ondragleave="this.classList.remove('drag-over')"
      ondrop="event.preventDefault();this.classList.remove('drag-over');handleDataRefreshDrop(event)">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
      <div class="data-refresh-dropzone-label">Drop file here or click to browse</div>
      <div class="data-refresh-dropzone-hint">SFDC accounts/customers<br>CSV, XLS, XLSX</div>
    </div>
    <input type="file" id="dataRefreshFileInput" accept=".csv,.xls,.xlsx" style="display:none" onchange="handleDataRefreshFile(event)">
    <div class="data-refresh-btns">
      <button class="data-refresh-btn" onclick="openSfdcModal()">
        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        SFDC Data
      </button>
    </div>
    <div class="data-refresh-status" id="dataRefreshStatus">
      <span id="sfdcLastRefresh">Never refreshed</span>
    </div>
  </div>
</div>

<!-- Geocoding Progress Toast -->
<div class="geocode-progress" id="geocodeProgress">
  <div class="geocode-progress-label" id="geocodeProgressLabel">Geocoding records...</div>
  <div class="geocode-progress-bar"><div class="geocode-progress-fill" id="geocodeProgressFill"></div></div>
  <div class="geocode-progress-detail" id="geocodeProgressDetail"></div>
</div>

<!-- Merge Preview Modal -->
<div class="merge-modal" id="mergeModal">
  <div class="merge-modal-content">
    <div class="merge-modal-header">
      <h3 id="mergeModalTitle">CSV Merge Preview</h3>
      <button class="merge-modal-close" onclick="closeMergeModal()">&times;</button>
    </div>
    <div class="merge-modal-body">
      <div class="merge-stat">
        <span class="label">Records in CSV</span>
        <span class="value" id="mergeTotalRecords">0</span>
      </div>
      <div class="merge-stat">
        <span class="label">New records to add</span>
        <span class="value added" id="mergeNewRecords">0</span>
      </div>
      <div class="merge-stat">
        <span class="label">Existing records to update</span>
        <span class="value updated" id="mergeUpdatedRecords">0</span>
      </div>
      <div class="merge-stat">
        <span class="label">Notes preserved</span>
        <span class="value preserved" id="mergeNotesPreserved">0</span>
      </div>
      <div class="merge-changes" id="mergeChangesList"></div>
    </div>
    <div class="merge-modal-footer">
      <button class="merge-btn merge-btn-cancel" onclick="closeMergeModal()">Cancel</button>
      <button class="merge-btn merge-btn-confirm" onclick="confirmMerge()">Apply Changes</button>
    </div>
  </div>
</div>

<!-- SFDC Refresh Modal -->
<div class="sfdc-modal-backdrop" id="sfdcModal" onclick="if(event.target===this)closeSfdcModal()">
  <div class="sfdc-modal-content">
    <div class="sfdc-modal-header">
      <h3>SFDC Data Refresh</h3>
      <button class="sfdc-modal-close" onclick="closeSfdcModal()">&times;</button>
    </div>
    <div class="sfdc-modal-body">
      <div class="sfdc-type-btns">
        <button class="sfdc-type-btn active-strat" id="sfdcTypeStrat" onclick="setSfdcType('accounts')">Accounts</button>
        <button class="sfdc-type-btn" id="sfdcTypeCust" onclick="setSfdcType('customers')">Customers</button>
      </div>
      <div class="sfdc-dropzone" id="sfdcDropzone" onclick="document.getElementById('sfdcFileInput').click()">
        <div class="sfdc-dropzone-icon">üìÑ</div>
        <div class="sfdc-dropzone-text">
          Drag CSV or Excel file here or <strong>browse</strong>
        </div>
        <div class="sfdc-dropzone-hint">Supports .csv, .xls, .xlsx ‚Äî Notes & local data preserved during merge</div>
        <input type="file" id="sfdcFileInput" accept=".csv,.xls,.xlsx" style="display:none" onchange="handleSfdcFile(event)">
      </div>
    </div>
  </div>
</div>

<!-- FULL-SCREEN ACCOUNT MODAL -->
<div class="account-modal" id="accountModal">
  <div class="account-modal-content">
    <div class="account-modal-header">
      <div class="account-modal-title">
        <h2 id="modalAccountName">District Name</h2>
        <div class="subtitle" id="modalAccountSubtitle">State ‚Ä¢ Region ‚Ä¢ Enrollment</div>
      </div>
      <span class="account-modal-badge accounts" id="modalAccountBadge">Account</span>
      <button class="account-modal-close" onclick="closeAccountModal()">&times;</button>
    </div>
    <div class="account-tabs">
      <button class="account-tab active" onclick="switchTab('info', this)">
        <span class="tab-icon">üìã</span>Info
      </button>
      <button class="account-tab" onclick="switchTab('math', this)">
        <span class="tab-icon">üìê</span>Math
      </button>
      <button class="account-tab" onclick="switchTab('attendance', this)">
        <span class="tab-icon">üìÖ</span>Attendance
      </button>
    </div>
    <div class="account-modal-body">
      <!-- INFO TAB -->
      <div class="tab-content active" id="tabInfo"></div>
      <!-- MATH TAB -->
      <div class="tab-content" id="tabMath"></div>
      <!-- ATTENDANCE TAB -->
      <div class="tab-content" id="tabAttendance"></div>
    </div>
  </div>
</div>

<!-- MAP -->
<div class="map-container">
  <div id="map"></div>

  <!-- Welcome Overlay (shown until user selects a filter) -->
  <div class="welcome-overlay" id="welcomeOverlay">
    <div class="welcome-card">
      <div class="welcome-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="10" r="3"/><path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"/>
        </svg>
      </div>
      <h2 class="welcome-title">Edia Territory Map</h2>
      <p class="welcome-subtitle">Strategic Intelligence Dashboard</p>
      <p class="welcome-msg">Select a team or filter from the sidebar to populate the map, or choose a quick view below.</p>
      <div class="welcome-teams">
        <button class="welcome-team-btn" onclick="quickFilterTeam('Strategic')">Strategic</button>
        <button class="welcome-team-btn" onclick="quickFilterTeam('ENT West')">ENT West</button>
        <button class="welcome-team-btn" onclick="quickFilterTeam('ENT East')">ENT East</button>
        <button class="welcome-team-btn" onclick="quickFilterTeam('SMB')">SMB</button>
      </div>
      <button class="welcome-opps-btn" onclick="quickFilterOpps()">Show Opps</button>
    </div>
  </div>

  <div class="ad-trigger-wrap">
    <button class="ad-trigger" id="adTrigger" onclick="toggleActionDashboard()">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="4" rx="1"/><rect x="14" y="10" width="7" height="4" rx="1"/><rect x="3" y="13" width="7" height="8" rx="1"/><rect x="14" y="17" width="7" height="4" rx="1"/></svg>
      Actions
    </button>
    <div class="count-badge" id="countBadge" onclick="toggleAccountListOverlay()"></div>
  </div>
  <div class="ad-overlay" id="adOverlay">
    <div class="ad-overlay-header">
      <h3>Action Dashboard</h3>
      <button class="ad-overlay-close" onclick="toggleActionDashboard()">&times;</button>
    </div>
    <div class="ad-overlay-body" id="actionDashboardBody"></div>
  </div>
  <!-- Account List Overlay (drops from count badge) -->
  <div class="al-overlay" id="alOverlay">
    <div class="al-overlay-header">
      <div style="display:flex;align-items:center;gap:10px;">
        <h3>Account List</h3>
        <span class="al-overlay-count" id="accountListCount"></span>
      </div>
      <button class="al-overlay-close" onclick="toggleAccountListOverlay()">&times;</button>
    </div>
    <div class="account-list-sort-bar" id="accountListSortBar"></div>
    <div class="account-list-body" id="accountListBody"></div>
  </div>

  <div class="legend" id="legend"></div>
</div>

<script type="module" src="/src/main.js"></script>
</body>
</html>
